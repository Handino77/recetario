<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dolce Delizia - Recetario de Reposter√≠a</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --gelato-mint: #93cb9a;
            --gelato-pink: #f0b7bd;
            --gelato-yellow: #f3e88e;
            --gelato-cyan: #99e3ec;
            --gelato-teal: #50b4c3;
            --cream: #fefdfb;
            --dark-chocolate: #3e2723;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #faf9f7 100%);
            color: var(--dark-chocolate);
        }
        
        .font-display {
            font-family: 'Playfair Display', serif;
        }
        
        .font-script {
            font-family: 'Dancing Script', cursive;
        }

        /* Gradientes inspirados en gelato */
        .bg-gelato-gradient {
            background: linear-gradient(135deg, var(--gelato-mint) 0%, var(--gelato-cyan) 100%);
        }
        
        .bg-strawberry-gradient {
            background: linear-gradient(135deg, var(--gelato-pink) 0%, #ffd6d9 100%);
        }
        
        .bg-lemon-gradient {
            background: linear-gradient(135deg, var(--gelato-yellow) 0%, #fff5b7 100%);
        }
        
        .bg-ocean-gradient {
            background: linear-gradient(135deg, var(--gelato-teal) 0%, var(--gelato-cyan) 100%);
        }

        /* Tarjetas con efecto de vidrio esmerilado */
        .glass-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* Botones estilo gelato */
        .btn-gelato {
            background: linear-gradient(135deg, var(--gelato-mint), var(--gelato-teal));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(147, 203, 154, 0.4);
        }
        
        .btn-gelato:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(147, 203, 154, 0.6);
        }

        /* Header con gradiente gelato */
        .header-gelato {
            background: linear-gradient(135deg, 
                rgba(147, 203, 154, 0.9) 0%, 
                rgba(153, 227, 236, 0.9) 50%, 
                rgba(240, 183, 189, 0.9) 100%);
            backdrop-filter: blur(20px);
        }

        /* Calculadora de ingredientes destacada */
        .calculator-highlight {
            background: linear-gradient(135deg, var(--gelato-yellow) 0%, var(--gelato-pink) 100%);
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(243, 232, 142, 0.3);
            animation: gentle-pulse 3s ease-in-out infinite alternate;
        }
        
        @keyframes gentle-pulse {
            0% { box-shadow: 0 12px 40px rgba(243, 232, 142, 0.3); }
            100% { box-shadow: 0 16px 50px rgba(243, 232, 142, 0.5); }
        }

        /* Inputs estilo gelato */
        .input-gelato {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 16px 24px;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .input-gelato:focus {
            outline: none;
            border-color: var(--gelato-teal);
            background: rgba(255, 255, 255, 0.95);
            transform: scale(1.02);
        }

        /* Modal estilo italiano */
        .modal-gelato {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%, 
                rgba(250, 249, 247, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        /* Iconos favoritos con animaci√≥n */
        .favorite-icon {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .favorite-icon.active {
            color: var(--gelato-pink);
            transform: scale(1.2);
            filter: drop-shadow(0 4px 8px rgba(240, 183, 189, 0.4));
        }

        /* Lista de ingredientes elegante */
        .ingredient-item {
            background: linear-gradient(90deg, 
                rgba(147, 203, 154, 0.1) 0%, 
                rgba(153, 227, 236, 0.1) 100%);
            border-left: 4px solid var(--gelato-mint);
            transition: all 0.2s ease;
        }
        
        .ingredient-item:hover {
            background: linear-gradient(90deg, 
                rgba(147, 203, 154, 0.2) 0%, 
                rgba(153, 227, 236, 0.2) 100%);
            transform: translateX(8px);
        }

        /* Responsive mejorado para m√≥viles */
        @media (max-width: 640px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .glass-card {
                margin-bottom: 1rem;
            }
            
            .modal-gelato {
                margin: 0.5rem;
                max-height: 95vh;
                overflow-y: auto;
            }
        }

        /* Loader elegante */
        .gelato-loader {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: conic-gradient(var(--gelato-mint), var(--gelato-pink), var(--gelato-yellow), var(--gelato-cyan), var(--gelato-mint));
            animation: spin 1s linear infinite;
        }
        
        .gelato-loader::after {
            content: '';
            position: absolute;
            inset: 4px;
            background: white;
            border-radius: 50%;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* N√∫meros de porciones destacados */
        .servings-number {
            background: linear-gradient(135deg, var(--gelato-teal), var(--gelato-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            font-size: 1.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="header-gelato sticky top-0 z-40 shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <!-- Logo gelato -->
                    <div class="relative">
                        <svg class="h-10 w-10" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="8" r="3" fill="#93cb9a"/>
                            <circle cx="12" cy="12" r="3" fill="#f0b7bd"/>
                            <circle cx="12" cy="16" r="3" fill="#f3e88e"/>
                            <path d="M12 19v3a1 1 0 01-2 0v-3" stroke="#3e2723" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl sm:text-3xl font-bold font-display text-white">
                            Dolce <span class="font-script">Delizia</span>
                        </h1>
                        <p class="text-xs sm:text-sm text-white/80 font-light">Gelateria & Pasticceria</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 sm:space-x-6">
                    <button id="favoritesBtn" class="text-white/90 hover:text-white transition-all font-medium text-sm sm:text-base p-2">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    </button>
                    <button id="shoppingListBtn" class="relative text-white/90 hover:text-white transition-all font-medium text-sm sm:text-base p-2">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"/>
                        </svg>
                        <span id="shoppingListCount" class="absolute -top-1 -right-1 bg-gelato-pink text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden font-bold">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="text-center py-12 sm:py-20 relative overflow-hidden">
            <!-- Formas decorativas de fondo -->
            <div class="absolute inset-0 pointer-events-none">
                <div class="absolute top-10 left-10 w-20 h-20 rounded-full bg-gelato-mint opacity-20 animate-bounce" style="animation-delay: 0s;"></div>
                <div class="absolute top-32 right-20 w-16 h-16 rounded-full bg-gelato-pink opacity-20 animate-bounce" style="animation-delay: 1s;"></div>
                <div class="absolute bottom-20 left-20 w-24 h-24 rounded-full bg-gelato-yellow opacity-20 animate-bounce" style="animation-delay: 2s;"></div>
                <div class="absolute bottom-32 right-10 w-18 h-18 rounded-full bg-gelato-cyan opacity-20 animate-bounce" style="animation-delay: 3s;"></div>
            </div>
            
            <div class="container mx-auto px-4 sm:px-6 relative z-10">
                <h2 class="text-4xl sm:text-6xl md:text-7xl font-script mb-4" style="background: linear-gradient(135deg, #50b4c3, #93cb9a, #f0b7bd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5);">
                    Sapori Autentici
                </h2>
                <p class="text-base sm:text-lg text-gray-600 max-w-2xl mx-auto font-light">
                    Recetas artesanales con el alma de Italia y el coraz√≥n de Chile
                </p>
            </div>
        </section>

        <div class="container mx-auto px-4 sm:px-6 py-8">
            <!-- Search Section -->
            <section class="mb-8 sm:mb-12">
                <div class="relative max-w-xl mx-auto">
                    <input type="text" id="searchInput" placeholder="Cerca la tua ricetta..." class="w-full input-gelato text-center">
                    <div class="absolute right-4 top-1/2 -translate-y-1/2 bg-ocean-gradient p-3 rounded-full">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                </div>
            </section>

            <!-- Recipe Grid -->
            <section id="recipe-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-8">
                <!-- Recipe cards will be injected here -->
            </section>
            
            <div id="no-results" class="text-center py-12 hidden">
                <div class="text-6xl mb-4">üç®</div>
                <h3 class="text-2xl font-display text-gray-600">Nessuna ricetta trovata</h3>
                <p class="text-gray-500 mt-2">Prova con un'altra ricerca, caro!</p>
            </div>
        </div>
    </main>

    <!-- Recipe Detail Modal -->
    <div id="recipe-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4" style="background: rgba(62, 39, 35, 0.6);">
        <div id="modal-content" class="modal-gelato rounded-3xl w-full max-w-6xl max-h-[95vh] flex flex-col transform transition-all duration-300 scale-95 opacity-0 overflow-hidden">
            <!-- Modal content will be injected here -->
        </div>
    </div>

    <!-- Shopping List Modal -->
    <div id="shopping-list-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4" style="background: rgba(62, 39, 35, 0.6);">
        <div class="modal-gelato rounded-3xl w-full max-w-2xl max-h-[95vh] flex flex-col transform transition-all duration-300 scale-95 opacity-0 overflow-hidden">
            <div class="p-6 bg-strawberry-gradient text-white flex justify-between items-center">
                <h2 class="text-2xl font-display">Lista della Spesa</h2>
                <button id="close-shopping-list-modal" class="text-white/80 hover:text-white text-3xl transition-colors">&times;</button>
            </div>
            <div id="shopping-list-content" class="p-6 overflow-y-auto flex-grow">
                <!-- Shopping list items will be injected here -->
            </div>
            <div class="p-6 bg-lemon-gradient">
                <h3 class="font-bold mb-4 text-dark-chocolate">Esporta Lista</h3>
                <div class="flex flex-wrap gap-2">
                    <button id="copy-list-btn" class="btn-gelato text-sm">Copia</button>
                    <button id="download-txt-btn" class="btn-gelato text-sm">TXT</button>
                    <button id="download-pdf-btn" class="btn-gelato text-sm">PDF</button>
                    <a id="whatsapp-share-btn" href="#" target="_blank" class="btn-gelato text-sm flex items-center bg-green-500 hover:bg-green-600">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.651 4.383 1.803 6.166l-1.225 4.485 4.574-1.196z"/></svg>
                        WhatsApp
                    </a>
                </div>
                <div id="pdf-loader" class="hidden items-center mt-4">
                    <div class="gelato-loader relative"></div>
                    <span class="ml-3 text-gray-600">Preparando PDF...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="mt-16 py-8 bg-gradient-to-t from-gray-50 to-transparent">
        <div class="container mx-auto px-4 sm:px-6 text-center text-gray-500">
            <p class="text-sm">&copy; 2025 Dolce Delizia. Fatto con amore per le nostre care pasticcere.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA ---
        const recipes = [
            {
                id: 1,
                name: "Pie de Lim√≥n Cl√°sico",
                description: "La combinaci√≥n perfecta de acidez y dulzura sobre una base crujiente.",
                image: "https://images.unsplash.com/photo-1572383672419-ab35444a6914?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                servings: { default: 8, unit: 'porciones' },
                ingredients: [
                    { name: 'Galletas de vino', base_quantity: 200, unit: 'g' },
                    { name: 'Mantequilla sin sal, derretida', base_quantity: 100, unit: 'g' },
                    { name: 'Leche condensada', base_quantity: 790, unit: 'g' },
                    { name: 'Yemas de huevo', base_quantity: 4, unit: 'unidades' },
                    { name: 'Jugo de lim√≥n fresco', base_quantity: 240, unit: 'ml' },
                    { name: 'Ralladura de lim√≥n', base_quantity: 1, unit: 'cda' },
                    { name: 'Claras de huevo', base_quantity: 4, unit: 'unidades' },
                    { name: 'Az√∫car granulada (para merengue)', base_quantity: 200, unit: 'g' },
                ],
                instructions: [
                    "Precalentar el horno a 180¬∞C. Moler las galletas hasta obtener un polvo fino. Mezclar con la mantequilla derretida.",
                    "Forrar la base de un molde para tarta de 23 cm con la mezcla de galletas, presionando firmemente. Hornear por 10 minutos. Dejar enfriar.",
                    "Para el relleno, batir la leche condensada con las yemas. Incorporar gradualmente el jugo y la ralladura de lim√≥n hasta obtener una mezcla homog√©nea.",
                    "Verter el relleno sobre la base de galleta fr√≠a. Hornear por 15-20 minutos, o hasta que los bordes est√©n firmes pero el centro a√∫n tiemble ligeramente. Enfriar por completo.",
                    "Para el merengue suizo, calentar las claras y el az√∫car a ba√±o mar√≠a, batiendo constantemente hasta que el az√∫car se disuelva (aprox. 60¬∞C).",
                    "Retirar del fuego y batir con batidora el√©ctrica a alta velocidad hasta obtener un merengue firme y brillante.",
                    "Cubrir el pie con el merengue, formando picos. Dorar con un soplete de cocina o bajo el grill del horno por unos minutos. Refrigerar antes de servir."
                ]
            },
            {
                id: 2,
                name: "Brownies de Chocolate Intenso",
                description: "H√∫medos, densos y con un profundo sabor a chocolate. Ideales para cafeter√≠as.",
                image: "https://images.unsplash.com/photo-1563373878-33403a2702a4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                servings: { default: 16, unit: 'unidades' },
                ingredients: [
                    { name: 'Mantequilla sin sal', base_quantity: 225, unit: 'g' },
                    { name: 'Chocolate semi-amargo (50-60%)', base_quantity: 200, unit: 'g' },
                    { name: 'Az√∫car granulada', base_quantity: 300, unit: 'g' },
                    { name: 'Huevos grandes', base_quantity: 4, unit: 'unidades' },
                    { name: 'Extracto de vainilla', base_quantity: 2, unit: 'cdtas' },
                    { name: 'Harina sin polvos de hornear', base_quantity: 120, unit: 'g' },
                    { name: 'Cacao en polvo sin az√∫car', base_quantity: 30, unit: 'g' },
                    { name: 'Sal', base_quantity: 0.5, unit: 'cdtas' },
                    { name: 'Nueces o chips de chocolate (opcional)', base_quantity: 100, unit: 'g' },
                ],
                instructions: [
                    "Precalentar el horno a 175¬∞C. Engrasar y enharinar un molde cuadrado de 23x23 cm.",
                    "Derretir la mantequilla y el chocolate a ba√±o mar√≠a o en el microondas en intervalos cortos. Dejar enfriar ligeramente.",
                    "En un bol grande, batir los huevos con el az√∫car hasta que la mezcla est√© p√°lida y espesa. A√±adir la vainilla.",
                    "Incorporar la mezcla de chocolate derretido a la mezcla de huevos y az√∫car.",
                    "En otro bol, tamizar la harina, el cacao en polvo y la sal. Agregar los ingredientes secos a la mezcla h√∫meda, mezclando solo hasta combinar.",
                    "Si se usan, a√±adir las nueces o chips de chocolate.",
                    "Verter la masa en el molde preparado y hornear por 30-35 minutos. El centro debe estar ligeramente h√∫medo. Dejar enfriar completamente antes de cortar."
                ]
            },
            {
                id: 3,
                name: "Cupcakes de Vainilla Perfectos",
                description: "Una base esponjosa y vers√°til para decorar. El cl√°sico que nunca falla.",
                image: "https://images.unsplash.com/photo-1614707267537-b85aaf00c8b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                servings: { default: 12, unit: 'unidades' },
                ingredients: [
                    { name: 'Harina sin polvos de hornear', base_quantity: 150, unit: 'g' },
                    { name: 'Polvos de hornear', base_quantity: 1.5, unit: 'cdtas' },
                    { name: 'Sal', base_quantity: 0.25, unit: 'cdtas' },
                    { name: 'Mantequilla sin sal, a T¬∞ ambiente', base_quantity: 115, unit: 'g' },
                    { name: 'Az√∫car granulada', base_quantity: 200, unit: 'g' },
                    { name: 'Huevos grandes', base_quantity: 2, unit: 'unidades' },
                    { name: 'Extracto de vainilla', base_quantity: 2, unit: 'cdtas' },
                    { name: 'Leche entera', base_quantity: 120, unit: 'ml' },
                ],
                instructions: [
                    "Precalentar horno a 175¬∞C y preparar un molde para 12 cupcakes con c√°psulas de papel.",
                    "En un bol, tamizar harina, polvos de hornear y sal.",
                    "En otro bol grande, batir la mantequilla con el az√∫car hasta que est√© cremosa y p√°lida (cremar).",
                    "A√±adir los huevos de uno en uno, batiendo bien despu√©s de cada adici√≥n. Incorporar la vainilla.",
                    "Agregar los ingredientes secos en tres adiciones, alternando con la leche en dos adiciones, comenzando y terminando con los secos. Mezclar hasta que est√© justo combinado.",
                    "Distribuir la masa equitativamente en las c√°psulas, llenando hasta 2/3 de su capacidad.",
                    "Hornear por 20-22 minutos o hasta que un palillo insertado en el centro salga limpio. Dejar enfriar en el molde 5 minutos antes de transferir a una rejilla."
                ]
            },
            {
                id: 4,
                name: "Cocadas Tradicionales",
                description: "Bocados dulces y jugosos de coco, horneados a la perfecci√≥n.",
                image: "https://images.unsplash.com/photo-1625864114248-529532584831?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                servings: { default: 24, unit: 'unidades' },
                ingredients: [
                    { name: 'Coco rallado deshidratado', base_quantity: 250, unit: 'g' },
                    { name: 'Leche condensada', base_quantity: 395, unit: 'g' },
                    { name: 'Yemas de huevo', base_quantity: 2, unit: 'unidades' },
                    { name: 'Extracto de vainilla', base_quantity: 1, unit: 'cdta' },
                ],
                instructions: [
                    "Precalentar el horno a 170¬∞C. Cubrir una bandeja de horno con papel mantequilla.",
                    "En un bol grande, mezclar el coco rallado, la leche condensada, las yemas y la vainilla hasta que todo est√© bien incorporado.",
                    "Con las manos ligeramente humedecidas o con dos cucharas, formar peque√±as bolitas o montoncitos de la mezcla y colocarlos en la ban
